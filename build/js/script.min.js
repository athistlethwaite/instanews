"use strict";
$(function () {
  $("#drop-down").on("change", function (e) {
    e.preventDefault();
    var a = $("#drop-down").val();
    $(".site-header").addClass("small-header"), "" !== a && ($(".ajax-loader").show(), function (e) {
      $(".top-stories ul").empty(), $.ajax({
        method: "GET",
        url: "https://api.nytimes.com/svc/topstories/v2/" + e + ".json?api-key=g6kpkfDKZ7PlqdA4ds2KEggP82QRbUyZ",
        dataType: "json"
      }).done(function (e) {
        if (0 === e.results.length) $(".top-stories ul").append("<li> Please select another section. </li>");
        else {
          var a = e.results.filter(function (e) {
              return void 0 !== e.multimedia[4]
            }),
            t = a.slice(0, 12);
          console.log(t), $.each(t, function (e, a) {
            var t = '<p class="abstract">' + a.abstract + "</p>",
              s = '<div class="article-image" style="background-image:url(' + a.multimedia[4].url + ');">' + t + "</div>",
              l = a.url;
            console.log(a), $(".top-stories ul").append('<li class="article-list"><a href="' + l + '">' + s + "</a></li>")
          })
        }
      }).fail(function () {
        console.log("Sorry, no articles were found. Please select another section.")
      }).always(function () {
        $(".ajax-loader").hide()
      })
    }(a))
  })
});